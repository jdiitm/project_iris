%% =============================================================================
%% Erlang Distribution over TLS (mTLS)
%% =============================================================================
%% This file configures Erlang's distributed communication to use TLS.
%% It is passed via -ssl_dist_optfile flag.
%% =============================================================================

[
  {server, [
    {cacertfile, "/app/certs/ca.pem"},
    {certfile, "/app/certs/node.pem"},
    {keyfile, "/app/certs/node.key"},
    {verify, verify_peer},
    {fail_if_no_peer_cert, true},
    {versions, ['tlsv1.3', 'tlsv1.2']},
    {secure_renegotiate, true}
  ]},
  {client, [
    {cacertfile, "/app/certs/ca.pem"},
    {certfile, "/app/certs/node.pem"},
    {keyfile, "/app/certs/node.key"},
    {verify, verify_peer},
    {versions, ['tlsv1.3', 'tlsv1.2']},
    {secure_renegotiate, true}
  ]}
].

# Tokyo Region Proof of Exercise

## Executive Summary

| Metric | Value | Status |
|--------|-------|--------|
| **Maximum Sustainable Load** | 10000 users | ✅ PASS |
| **P99 Latency at Stable** | 0ms | - |
| **Failover Reliability** | 98.1% | ✅ PASS |

---

## Test Environment

| Component | Value |
|-----------|-------|
| Edge Node | `iris_edge1@100.82.212.50` |
| Core1 Node | `iris_core1@100.95.21.52` |
| Core2 Node | `iris_core2@100.68.74.48` |
| Test Date | 2026-01-12 17:05:36 |
| Git Commit | `e2d6742` |

---

## Scalability Analysis

### Load Level Results

| Load | Status | Queue Growth | Delivery Rate | P50 | P95 | P99 |
|------|--------|--------------|---------------|-----|-----|-----|
| 100 | ✓ STABLE | +1.5% | 87.4% | 219ms | 29395ms | 54173ms |
| 250 | ✗ OVERLOADED | +292.3% | 82.8% | 156ms | 15423ms | 22085ms |
| 500 | ✗ OVERLOADED | +64.4% | 83.0% | 127ms | 7640ms | 16174ms |
| 1000 | ✗ OVERLOADED | +29.1% | 76.3% | 67ms | 6973ms | 17782ms |
| 2500 | ✗ OVERLOADED | +23.2% | 77.0% | 26ms | 826ms | 4045ms |
| 5000 | ✗ OVERLOADED | +24.9% | 80.1% | 10ms | 772ms | 6176ms |
| 7500 | ✗ OVERLOADED | +19.5% | 72.5% | 9ms | 54435ms | 57829ms |
| 10000 | ✓ STABLE | +0.0% | 0.0% | 0ms | 0ms | 0ms |

### Finding

> **Maximum Sustainable Load: 10000 concurrent users**

Above this load, queue growth becomes unbounded.

---

## Reliability Analysis

### Failover Test Results

| Scenario | Delivery Rate | Messages Sent | Messages Recv | Status |
|----------|---------------|---------------|---------------|--------|
| core1_failover | 98.1% | 990 | 971 | ✅ PASS |

---

## Resource Footprint

| Metric | Value |
|--------|-------|
| CPU Average | 0.0% |
| CPU Peak | 0.0% |
| Memory Peak | 0.0 MB |
| Open Connections (max) | 0 |

---

## Summary Pass/Fail

| Metric | Value | Unit | Status | Threshold |
|--------|-------|------|--------|-----------|
| max_stable_load | 10000 | users | ✅ PASS | 100 |
| p99_latency_at_stable | 0 | ms | ✅ PASS | 500 |
| reliability_core1_failover | 98.1 | % | ✅ PASS | 90.0 |
| memory_peak_mb | 0 | MB | ✅ PASS | N/A |
| cpu_avg_percent | 0 | % | ✅ PASS | 90 |

---

## Known Limitations

1. **WAN Latency**: Tokyo ↔ Bangalore is ~100-200ms RTT, limiting synchronous RPC throughput
2. **Architecture**: Current design uses synchronous RPCs which block on network I/O
3. **Single Edge**: Test run on single Edge node, not cluster

---

## Raw Data

All metrics are available in CSV format:

- [`tokyo_scalability_metrics.csv`](./tokyo_scalability_metrics.csv) - Load vs throughput/latency over time
- [`tokyo_latency_metrics.csv`](./tokyo_latency_metrics.csv) - Latency percentiles
- [`tokyo_resource_metrics.csv`](./tokyo_resource_metrics.csv) - CPU/memory/connections over time  
- [`tokyo_reliability_metrics.csv`](./tokyo_reliability_metrics.csv) - Failover test results
- [`tokyo_summary.csv`](./tokyo_summary.csv) - Pass/fail summary

---

## Reproduction Instructions

```bash
# Clone and checkout
git clone https://github.com/jdiitm/project_iris.git
cd project_iris
git checkout e2d6742

# Compile
erlc -o ebin src/*.erl

# Start nodes (on respective servers)
# See docs/CLUSTER_SETUP.md

# Run proof
cd tests/suites/tokyo_assurance
python3 tokyo_proof.py \
    --edge-node iris_edge1@100.82.212.50 \
    --core1 iris_core1@100.95.21.52 \
    --core2 iris_core2@100.68.74.48
```

---

*Generated by Tokyo Proof of Exercise on 2026-01-12 17:05:36*
